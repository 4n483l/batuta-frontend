<div class="container">
  <h2>Registro</h2>

  <!-- Formulario de registro vinculado con ngForm -->
  <form (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm" novalidate>

    <!-- Nombre y Apellidos (en la misma fila) -->
    <div class="form-row">
      <div class="form-group third-width">
        <label for="name">Nombre:</label>
        <input type="text" id="name" name="name" class="form-control" [(ngModel)]="name" #nameInput="ngModel" required
          minlength="3" placeholder="Introduce tu nombre" />
        <div *ngIf="nameInput.invalid && nameInput.touched" class="text-danger">
          <div *ngIf="nameInput.errors?.['required']">El nombre es obligatorio.</div>
          <div *ngIf="nameInput.errors?.['minlength']">El nombre debe tener al menos 3 caracteres.</div>
        </div>
      </div>
      
      <div class="form-group two-thirds-width">
        <label for="lastname">Apellidos:</label>
        <input type="text" id="lastname" name="lastname" class="form-control" [(ngModel)]="lastname"
          #surnameInput="ngModel" required placeholder="Introduce tus apellidos" />
        <div *ngIf="surnameInput.invalid && surnameInput.touched" class="text-danger">
          <div *ngIf="surnameInput.errors?.['required']">Los apellidos son obligatorios.</div>
        </div>
      </div>
    </div>


    <div class="form-row">
      <!-- DNI   -->
      <div class="form-group third-width">
        <label for="dni">DNI / NIE:</label>
        <input type="text" id="dni" name="dni" class="form-control" [(ngModel)]="dni" #dniInput="ngModel" required
          placeholder="Introduce tu DNI" pattern="^[0-9]{8}[A-Za-z]$" />
        <div *ngIf="dniInput.invalid && dniInput.touched" class="text-danger">
          <div *ngIf="dniInput.errors?.['required']">El DNI es obligatorio.</div>
          <div *ngIf="dniInput.errors?.['pattern']">El DNI debe tener 8 números y 1 letra</div>
        </div>
      </div>
      <!-- Teléfono -->
      <div class="form-group third-width">
        <label for="phone">Teléfono:</label>
        <input type="tel" id="phone" name="phone" class="form-control" [(ngModel)]="phone" #phoneInput="ngModel"
          required placeholder="Introduce tu teléfono" />
        <div *ngIf="phoneInput.invalid && phoneInput.touched" class="text-danger">
          <div *ngIf="phoneInput.errors?.['required']">El teléfono es obligatorio.</div>
        </div>
      </div>
      <!-- Fecha de Nacimiento -->
      <div class="form-group third-width">
        <label for="birth_date">Fecha de Nacimiento:</label>
        <input type="date" id="birth_date" name="birth_date" class="form-control" [(ngModel)]="birth_date"
          #birthdateInput="ngModel" required />
        <div *ngIf="birthdateInput.invalid && birthdateInput.touched" class="text-danger">
          <div *ngIf="birthdateInput.errors?.['required']">La fecha de nacimiento es obligatoria.</div>
        </div>
      </div>
    </div>

    <!-- Dirección -->
    <div class="form-group">
      <label for="address">Dirección:</label>
      <input type="text" id="address" name="address" class="form-control" [(ngModel)]="address" #addressInput="ngModel"
        required placeholder="Introduce tu dirección" />
      <div *ngIf="addressInput.invalid && addressInput.touched" class="text-danger">
        <div *ngIf="addressInput.errors?.['required']">La dirección es obligatoria.</div>
      </div>
    </div>

    <!-- Localidad y Código Postal (en la misma fila) -->
    <div class="form-row">
      <div class="form-group two-thirds-width">
        <label for="city">Localidad:</label>
        <input type="text" id="city" name="city" class="form-control" [(ngModel)]="city" #cityInput="ngModel" required
          placeholder="Introduce tu localidad" />
        <div *ngIf="cityInput.invalid && cityInput.touched" class="text-danger">
          <div *ngIf="cityInput.errors?.['required']">La localidad es obligatoria.</div>
        </div>
      </div>
      <div class="form-group third-width">
        <label for="postal_code">Código Postal:</label>
        <input type="text" id="postal_code" name="postal_code" class="form-control" [(ngModel)]="postal_code"
          #postalCodeInput="ngModel" required placeholder="Introduce tu código postal" pattern="^\d{5}$"/>
        <div *ngIf="postalCodeInput.invalid && postalCodeInput.touched" class="text-danger">
          <div *ngIf="postalCodeInput.errors?.['required']">El código postal es obligatorio.</div>
          <div *ngIf="postalCodeInput.errors?.['pattern']">El código postal consta de 5 números.</div>
        </div>
      </div>
    </div>

    <!-- Correo Electrónico -->
    <div class="form-group">
      <label for="email">Correo Electrónico:</label>
      <input type="email" id="email" name="email" class="form-control" [(ngModel)]="email" #emailInput="ngModel"
        required placeholder="Introduce tu correo" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"/>
      <div *ngIf="emailInput.invalid && emailInput.touched" class="text-danger">
        <div *ngIf="emailInput.errors?.['required']">El correo electrónico es obligatorio.</div>
        <div *ngIf="emailInput.errors?.['email']">El correo electrónico no es válido.</div>
          <div *ngIf="emailInput.errors?.['pattern']">Por favor, introduce un correo válido.</div>
      </div>
    </div>

    <!-- Contraseña y Confirmar Contraseña (en la misma fila) -->
    <div class="form-row">
      <div class="form-group half-width">
        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" class="form-control" [(ngModel)]="password"
          #passwordInput="ngModel" required minlength="8" placeholder="Introduce tu contraseña" />
        <div *ngIf="passwordInput.invalid && passwordInput.touched" class="text-danger">
          <div *ngIf="passwordInput.errors?.['required']">La contraseña es obligatoria.</div>
          <div *ngIf="passwordInput.errors?.['minlength']">La contraseña debe tener al menos 8 caracteres.</div>
        </div>
      </div>

      <div class="form-group half-width">
        <label for="password_confirmation">Confirmar Contraseña:</label>
        <input type="password" id="password_confirmation" name="password_confirmation" class="form-control"
          [(ngModel)]="password_confirmation" #confirmPasswordInput="ngModel" required [pattern]="password"
          placeholder="Repite tu contraseña" />
        <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched" class="text-danger">
          <div *ngIf="confirmPasswordInput.errors?.['required']">La confirmación de la contraseña es obligatoria.</div>
          <div *ngIf="confirmPasswordInput.errors?.['pattern']">Las contraseñas no coinciden.</div>
        </div>
      </div>
    </div>

    <!-- Botón de Registro -->
    <button type="submit" class="btn btn-primary" [disabled]="registerForm.invalid">
      Registrarse
    </button>
  </form>
</div>
